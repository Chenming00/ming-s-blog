---
title: "It took me several hours to switch to a 2.5G modem"
date: 2024-06-22T00:28:45+08:00
draft: false
tags: [2.5G Modem, Network]
---

> 由于中国联通给的光猫是千兆的，我的带宽又刚好是千兆的，所以永远跑不满千兆，我就想着换个 2.5G 的光猫，在联系联通客服多次之后，联通表示不给换，所以我自己在小黄鱼上买一个 ZXHN F7015TV3，花费 130 元人民币。

收到光猫之后，顺利地填写了 LOID，注册 OLT 成功，测试了一下，路由器拨号成功，获取到了公网 IP。本以为这就结束了。结果疑难杂症这就来了，我可以使用部分不需要 DNS 解析的服务，但是涉及到 DNS 解析的服务都不行。

一开始以为是联通那边做了验证，我换了光猫，设备的 SN 和 MAC 地址都变了，联通阻止了我的连接，我又通过 Telnet 修改了新光猫的 SN 和 MAC 地址，伪装成和老光猫完全一直，但是还是存在一样的问题。

最后我发现，`nslookup baidu.com` 和 `nslookup bilibili.com` 都是由 **119.29.29.29#53** 解析的，但是返回的 IP 却永远是 `192.168.1.1`，我的网络环境是光猫桥接，路由器拨号，路由器的 DHCP 服务器分配的是 `119.29.29.29` 和 `223.6.6.6`。奇怪的是，为什么会被 DNS 劫持解析成 `192.168.1.1` 呢？

后来在 Google 搜索之后，恩山论坛也有类似的情况。原来是在设备注册的时候，到 30% 卡住了。

```
到 ITMS 的通道不通，请联系客户经理或拨打 10000。
```

我当时在网上搜索和咨询卖家之后，发现这个 ITMS 只是电信用来远程管理光猫的，加上我是联通宽带，我并不希望 ITMS 注册成功，而且并不会影响桥接使用。结果，恶心的事情是，如果光猫的 ITMS 是“未注册”的状态，DNS 解析就会被劫持，不管你访问任何的网站理论上都会跳转到“设备注册”的页面。

解决方案只能强行写死注册的状态为“注册成功”。

```shell
sendcmd 1 DB set PDTCTUSERINFO 0 Status 0
sendcmd 1 DB set PDTCTUSERINFO 0 Result 1
sendcmd 1 DB save
```

最后，顺利用上 2.5G 光猫，接下来考虑换上 2.5G 交换机。F7015TV3 电信版的性价比还是可以的，非常小巧，不占地方，支持全国移动联通电信的宽带。